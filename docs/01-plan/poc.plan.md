# Trump Card Auto Chess — POC 작업 계획서

**버전**: 1.0.0
**작성일**: 2026-02-19
**기반 PRD**: `docs/01-plan/card-autochess.prd.md` (v4.0)
**목적**: 핵심 리스크 검증 최소 범위 POC 정의

---

## 1. POC 목적 및 목표

### 1.1 검증 목적

전체 게임(8인 PvP, 7+ 스테이지, 증강체/아이템 완전 구현)을 만들기 전에,
**핵심 메커니즘이 실제로 재미있고 구현 가능한지** 최소 비용으로 검증한다.

### 1.2 검증 핵심 가설

| # | 가설 | 검증 방법 | 성공 기준 |
|---|------|---------|---------|
| H1 | OFC 3라인 강도 제약(Back≥Mid≥Front)이 직관적으로 이해되고 의미 있는 전략 결정을 유도한다 | 2인 대전 5판 + 플레이어 인터뷰 | 폴 발생률 < 20%, "전략적 배치 고민" 응답 ≥ 80% |
| H2 | 포커 핸드 비교 판정이 명확하고 결과 수용도가 높다 | 판정 로직 자동 테스트 100케이스 | 오판정 0건, "결과가 납득된다" 응답 ≥ 90% |
| H3 | TFT 이자 경제(골드 보유 인센티브 vs 즉시 투자)가 흥미로운 경제적 딜레마를 만든다 | 2인 5라운드 경제 시뮬레이션 | 두 플레이어 간 다른 경제 전략 자발적 선택 ≥ 80% |
| H4 | 52장 공유 풀 경쟁이 체감되는 긴장감을 만든다 | 2인 대전 중 "상대가 내 카드를 가져갔다" 반응 추적 | 풀 경쟁 의식 이벤트 ≥ 3회/게임 |
| H5 | 훌라(×4) 선언이 전략적 하이라이트 순간을 만든다 | 훌라 선언 성공/실패 시 반응 측정 | "짜릿하다/긴장된다" 응답 ≥ 70% |

### 1.3 성공 기준 (정량 지표)

| 지표 | 최소 합격선 | 목표 |
|------|-----------|------|
| 포커 핸드 판정 자동 테스트 통과율 | 100% (오판정 0) | 100% |
| OFC 폴 판정 정확도 | 100% | 100% |
| 경제 시스템 골드 계산 정확도 | 100% | 100% |
| 2인 대전 완주 성공률 (5라운드) | ≥ 95% (크래시/오류 없음) | 100% |
| 플레이어 "다시 하고 싶다" 응답 | ≥ 60% | ≥ 80% |

### 1.4 POC 범위 경계

**In-Scope (반드시 검증)**:
- 52장 카드 시스템 + 랭크/수트 정의
- 포커 핸드 9종 자동 판정 로직
- OFC 3라인 배치 + 폴(Foul) 판정
- TFT 이자 경제 (기본 5골드 + 이자)
- 2인 간소화 대전 (8인 PvP 축소)
- 공유 카드 풀 (제한된 버전)
- 훌라(×4) 선언 메커니즘

**Out-of-Scope (검증 제외)**:
- 8인 멀티플레이어 PvP
- 증강체 시스템 (Silver/Gold/Prismatic)
- 아이템 파츠 조합 시스템
- 페이스 카드 특수 능력 (J/Q/K/A 보정)
- 홀덤 이벤트 (플롭/턴/리버)
- 스톱(×8) 선언
- 캐러셀, 크리프 보스 라운드
- 로열티(Royalty) 포인트 시스템
- 블라인드 유지비
- 으뜸패 로테이션
- 판타지랜드
- 네트워크 멀티플레이어

---

## 2. 핵심 리스크 분석

### 2.1 기술적 리스크 TOP 5

| 순위 | 리스크 | 설명 | 검증 방법 | 대응 방안 |
|------|--------|------|---------|---------|
| R1 | **포커 핸드 판정 복잡도** | 핸드 강도 비교 시 타이브레이커 3단계(핸드→강화카드수→수트순환)의 엣지 케이스 처리가 복잡함 | pytest TDD — 100개 경계 케이스 작성 | 판정 우선순위 명확한 enum 테이블, 단계별 분리 함수 |
| R2 | **OFC Foul 판정 타이밍** | 준비 페이즈에서 실시간으로 폴 여부를 피드백해야 하는 UI/로직 연동 복잡성 | 단위 테스트 + CLI 시뮬레이션 | 배치 시 즉시 폴 경고 계산 함수 분리 |
| R3 | **공유 풀 동시성** | 2인에서도 동일 라운드에 같은 카드를 동시에 원할 수 있음 (순번 처리 필요) | 2인 동시 구매 시나리오 테스트 | 선착순 단순 처리 (POC는 동기 처리) |
| R4 | **핸드 자동 생성 알고리즘** | 배치된 카드 배열에서 최강 포커 핸드를 자동으로 찾는 알고리즘 (nC5 조합) | 벤치마크 테스트: 5장/5장/3장 모든 조합 | 5장은 C(5,5)=1로 고정, 3장은 C(3,2) 조합만 고려 |
| R5 | **골드 경제 밸런스** | 이자 최대화(50골드 유지) vs 즉시 투자의 밸런스가 한쪽이 압도적으로 유리할 수 있음 | 5라운드 시뮬레이션 자동화 테스트 | 이자 5골드 상한이 충분한 제약인지 수치 시뮬레이션 |

### 2.2 게임플레이 리스크 TOP 3

| 순위 | 리스크 | 설명 | 검증 방법 |
|------|--------|------|---------|
| G1 | **OFC 제약이 재미보다 답답함으로 느껴질 수 있음** | Back≥Mid≥Front 강제 규칙이 자유도를 지나치게 제한해 전략보다 피로감을 줄 수 있음 | 플레이어 인터뷰: "배치 결정 시 어떤 감정?" |
| G2 | **포커 지식이 없는 사용자의 진입 장벽** | 핸드 강도를 모르면 배치 의사결정이 불가능함 | 포커 비경험자 1명 포함 테스트 + 힌트 UI 필요도 측정 |
| G3 | **2인 POC에서 공유 풀 경쟁감 부재** | 8인에서 핵심인 공유 풀 긴장감이 2인에서는 희석될 수 있음 | 2인 테스트에서 "상대 카드 의식" 빈도 측정 |

### 2.3 엣지 케이스 (Edge Cases)

| 케이스 | 상황 | 처리 방식 |
|--------|------|---------|
| EC1 | Front 3칸에 스트레이트 구성 시도 (A-2-3) | 3장 핸드는 스트레이트 불가 — 원페어/하이카드만 허용 명시 |
| EC2 | 같은 핸드 + 같은 강화카드수 + 같은 기준수트 | 더 높은 랭크 카드 보유 쪽 승리 (PRD §7.2 규칙 적용) |
| EC3 | 3라인 중 일부만 배치 (슬롯 미채움) | 빈 슬롯은 하이카드 0으로 처리 → 폴 가능성 최소화 UI 경고 |
| EC4 | 풀에 특정 카드 0장 남은 상태에서 리롤 | 해당 카드 상점 미등장 보장 (풀 고갈 처리) |
| EC5 | 훌라 선언 후 폴 발생 동시에 | 폴 패널티 먼저 적용 → 훌라 조건 재판정 → 실패 시 OFC 로열티 -25% |

---

## 3. POC 범위 정의 (MoSCoW)

### 3.1 Must Have (POC 필수 — 없으면 검증 불가)

| 기능 | 설명 | 검증 가설 |
|------|------|---------|
| 카드 시스템 | 52장 덱, 랭크 2~A, 수트 4종 | H1, H2, H4 |
| 포커 핸드 자동 판정 | 9종 핸드 + 3단계 타이브레이커 | H2 |
| OFC 3라인 배치 | Front(3칸)/Mid(5칸)/Back(5칸) + 폴 판정 | H1 |
| TFT 경제 기본 | 라운드당 5골드 + 이자 시스템 + 카드 구매/매각 | H3 |
| 공유 카드 풀 | 2인 기준 공유 풀 (Common 29장 × 4수트) | H4 |
| 2인 간소화 전투 | 라인별 핸드 비교 → HP 피해 계산 | H1, H2 |
| 훌라 선언 | 시너지 3개+ 조건 + ×4 배수 | H5 |
| 별 강화 합성 | 같은 랭크+수트 3장 → 2성 | H3, H4 |

### 3.2 Should Have (POC 품질 향상)

| 기능 | 설명 | 우선순위 이유 |
|------|------|------------|
| 수트 시너지 1단계 | 같은 수트 2장+ 효과 (단순화) | 수트 전략 의미 있게 만듦 |
| 별 강화 3성 | 2성 3장 → 3성 | 카드 수집 목표 제공 |
| 연승/연패 보너스 | 경제 변동 요소 | 경제 흥미도 증가 |
| CLI 기본 UI | 상태 시각화 (텍스트 보드) | 플레이어빌리티 확인 |
| Pineapple 드래프트 | 3장 공개 → 2장 픽 | 카드 획득 전략 다양화 |

### 3.3 Could Have (여유 있으면)

| 기능 | 설명 |
|------|------|
| 포커 핸드 힌트 표시 | 현재 배치의 핸드 실시간 표시 |
| 수트 시너지 2~3단계 | 완성도 향상 |
| 7 특권 (Seven Privilege) | 수트 카운트 +1 보정 |
| 간단 웹 UI | CLI 대신 브라우저 기반 |

### 3.4 Won't Have (POC 제외 — Full Dev에서)

| 제외 기능 | 이유 |
|---------|------|
| 8인 멀티플레이어 | 네트워킹 복잡도, 핵심 검증과 무관 |
| 증강체 시스템 | 시스템 레이어 추가로 검증 포커스 분산 |
| 홀덤 이벤트 | 보조 메커니즘, 핵심 루프 아님 |
| 페이스 카드 특수 능력 | 밸런싱 비용 높음 |
| 캐러셀/크리프 보스 | 라운드 다양성 — Full Dev에서 |
| 로열티 포인트 상세 계산 | 단순화 HP 피해로 대체 |
| 판타지랜드 | 고급 메커니즘 — 코어 검증 후 |
| 블라인드 유지비 | 후반 경제 요소 |

---

## 4. POC 게임 루프

### 4.1 POC 핵심 루프 (ASCII 다이어그램)

```
  +-------------------------------------------+
  |          POC 게임 시작: 2인                |
  |  플레이어 A, 플레이어 B — 각 HP 100        |
  +--------------------+----------------------+
                       |
                       v
  +--------------------+----------------------+
  |             라운드 시작 (최대 5라운드)      |
  |  - 골드 수입: 기본 5 + 이자(보유÷10, 최대5)|
  |  - 연승/연패 보너스 (+0~+3)               |
  +--------------------+----------------------+
                       |
                       v
  +--------------------+----------------------+
  |          준비 페이즈 (35초)                |
  |                                           |
  |  [Pineapple 드래프트]                      |
  |  공유 풀에서 3장 공개 → 2장 픽 → 1장 반환  |
  |                                           |
  |  [플레이어 행동 — 동시 진행]               |
  |  ┌─ 상점 (5장 공개, 등급별 비용)           |
  |  ├─ 리롤 (2골드)                          |
  |  ├─ 별 강화 합체 (같은 랭크+수트 3장→2성) |
  |  ├─ 카드 매각                             |
  |  └─ OFC 3라인 배치                        |
  |     Back(5칸) ≥ Mid(5칸) ≥ Front(3칸)    |
  +--------------------+----------------------+
                       |
                       v
  +--------------------+----------------------+
  |           폴(Foul) 판정                   |
  |  Back < Mid OR Mid < Front → 패널티 라인  |
  |  해당 라인 핸드 강도 -1등급               |
  +--------------------+----------------------+
                       |
                       v
  +--------------------+----------------------+
  |          훌라 선언 (옵션)                  |
  |  시너지 3개+ 활성화 → 훌라 선언 가능       |
  |  성공 시 이번 라운드 HP 피해 ×4            |
  |  실패 패널티: OFC 로열티 -25%             |
  +--------------------+----------------------+
                       |
                       v
  +--------------------+----------------------+
  |          전투 판정 (자동)                  |
  |                                           |
  |  Back vs Back   → 승/패/무                |
  |  Mid  vs Mid    → 승/패/무                |
  |  Front vs Front → 승/패/무                |
  |                                           |
  |  판정 우선순위:                            |
  |  1. 포커 핸드 강도                         |
  |  2. 강화 카드(2성+3성) 수                 |
  |  3. 수트 순환 우위 (♠>♥>♦>♣>♠)          |
  +--------------------+----------------------+
                       |
                       v
  +-------+--------+--------+--------+--------+
          |        |        |        |
       3:0 승    2:1 승   1:2 패   0:3 패
          |        |        |        |
          v        v        v        v
  +--------------------+----------------------+
  |          HP 피해 계산                      |
  |  기본: 이긴 라인 수 × 스테이지 피해(2)     |
  |  스쿠프(3:0): 기본 + 보너스 2             |
  |  훌라 선언 성공 시: 위 결과 × 4           |
  +--------------------+----------------------+
                       |
                       v
  +-------+--------+--------+--------+--------+
          |                          |
        HP > 0                    HP ≤ 0
          |                          |
          v                          v
  [다음 라운드 → 최대 5라운드]     [탈락 / 게임 종료]
                       |
                       v (5라운드 후)
  +--------------------+----------------------+
  |          최종 결과                         |
  |  남은 HP 비교 → 승자 결정                  |
  +-------------------------------------------+
```

### 4.2 POC 간소화 내용 (Full 게임 대비)

| 항목 | Full 게임 | POC 간소화 |
|------|---------|----------|
| 플레이어 수 | 8인 PvP | **2인 로컬** |
| 스테이지 수 | 7+ 스테이지 | **5라운드 단일 스테이지** |
| HP | 100 (TFT 표준) | **100 (동일)** |
| 크리프 라운드 | 1-1~1-3 PvE | **없음 (PvP만)** |
| 캐러셀 | 있음 | **없음** |
| 홀덤 이벤트 | 있음 | **없음** |
| 증강체 | 3회 선택 | **없음** |
| HP 피해 계산 | 상세 로열티 포함 | **이긴 라인수 × 2 (단순화)** |
| 스쿠프 보너스 | 로열티 +6 | **+2 단순화** |
| 블라인드 유지비 | 있음 | **없음** |

### 4.3 POC 종료 조건

- **정상 종료**: 5라운드 완료 → HP 높은 쪽 승리
- **조기 종료**: 어느 쪽이든 HP ≤ 0이 되면 즉시 종료
- **동점**: 5라운드 후 HP 동일 → 최종 라운드 스쿠프 플레이어 승리

---

## 5. 기술 스택 가이드라인

### 5.1 권장 스택

```
  +------------------------------------------+
  |           POC 기술 스택                   |
  +------------------------------------------+
  |  게임 로직 (Core)                         |
  |  ┌─────────────────────────────────────┐ |
  |  │  Python 3.11+                       │ |
  |  │  - card.py     : Card, Deck 모델     │ |
  |  │  - hand.py     : 포커 핸드 판정       │ |
  |  │  - board.py    : OFC 3라인 + Foul    │ |
  |  │  - economy.py  : 골드/이자/레벨       │ |
  |  │  - combat.py   : 전투 판정 + HP       │ |
  |  │  - pool.py     : 공유 카드 풀         │ |
  |  │  - game.py     : 게임 루프 오케스트레이터│ |
  |  └─────────────────────────────────────┘ |
  |                                           |
  |  UI (Phase 5 — 마지막 구현)               |
  |  ┌──────────────┬──────────────────────┐  |
  |  │ Option A     │ Option B             │  |
  |  │ CLI (빠름)    │ FastAPI + HTML       │  |
  |  │ 즉시 검증 가능│ 실제 플레이 경험      │  |
  |  │ Recommended  │ Should Have 완료 후   │  |
  |  └──────────────┴──────────────────────┘  |
  |                                           |
  |  테스트                                    |
  |  ┌─────────────────────────────────────┐ |
  |  │  pytest + pytest-cov                │ |
  |  │  TDD: Red → Green → Refactor         │ |
  |  └─────────────────────────────────────┘ |
  +------------------------------------------+
```

### 5.2 디렉토리 구조 (예상)

```
  C:\claude\card_ofc\
  ├── src\
  │   ├── __init__.py
  │   ├── card.py          # Card(rank, suit), Deck, 공유 풀
  │   ├── hand.py          # PokerHand 판정, 타이브레이커
  │   ├── board.py         # OFCBoard, 3라인 배치, Foul 판정
  │   ├── economy.py       # Gold, Interest, Shop, Level
  │   ├── combat.py        # 전투 판정, HP 피해, 훌라 배수
  │   ├── pool.py          # SharedCardPool (2인 공유)
  │   └── game.py          # GameState, RoundManager
  ├── tests\
  │   ├── test_card.py     # 카드/덱 단위 테스트
  │   ├── test_hand.py     # 핸드 판정 100케이스
  │   ├── test_board.py    # OFC Foul 판정 케이스
  │   ├── test_economy.py  # 이자/골드 계산 테스트
  │   ├── test_combat.py   # 전투 결과 + 훌라 배수
  │   └── test_game.py     # 5라운드 통합 시뮬레이션
  ├── cli\
  │   └── main.py          # CLI 진입점 (2인 로컬 대전)
  ├── docs\
  │   └── 01-plan\
  │       ├── card-autochess.prd.md
  │       └── poc.plan.md  (이 문서)
  └── CLAUDE.md
```

### 5.3 의존성

| 패키지 | 용도 | 필수 여부 |
|--------|------|---------|
| Python 3.11+ | 런타임 | 필수 |
| pytest | 단위 테스트 | 필수 |
| pytest-cov | 커버리지 | 필수 |
| ruff | 린트 | 필수 |
| dataclasses | Card/GameState 모델 | 내장 |
| enum | Rank, Suit, HandType | 내장 |
| typing | 타입 힌트 | 내장 |
| fastapi | 웹 UI (Option B) | 선택 |
| uvicorn | FastAPI 서버 | 선택 |

---

## 6. 구현 우선순위 및 단계

### Phase 1: 카드 시스템 + 포커 핸드 판정 (Core Logic)

**목표**: 게임의 가장 근본적인 판정 엔진 완성

| # | 태스크 | 구현 방법 | Acceptance Criteria |
|---|--------|---------|-------------------|
| 1.1 | `Card` 모델 정의 | `dataclass Card(rank: Rank, suit: Suit, stars: int=1)` + Rank(2~A) Enum + Suit(♠♥♦♣) Enum | `test_card.py` — 52장 덱 생성, 랭크 비교, 수트 순환 우위 판정 모두 통과 |
| 1.2 | `Deck` / 공유 풀 초기화 | 등급별 복사본 수(Common=29, Rare=22, Epic=18, Legendary=12, Mythic=10) × 4수트 | 풀 총 카드 수 계산 정확, 랜덤 드로우 시 풀 차감 확인 |
| 1.3 | 포커 핸드 자동 판정 | `evaluate_hand(cards: List[Card]) -> HandResult` — 9종 핸드 탐지 알고리즘 | `test_hand.py` 100케이스 — 모든 핸드 종류 + 경계 케이스 통과율 100% |
| 1.4 | 타이브레이커 3단계 | `compare_hands(h1, h2) -> Winner` — 핸드강도 → 강화카드수 → 수트순환 우위 | EC2 케이스 포함 동률 처리 전부 정확 |
| 1.5 | 수트 순환 우위 계산 | 혼합수트 시 기준수트 결정 로직 (가장 많은 수트, 동수 시 최고랭크 수트) | 혼합 수트 10케이스 모두 정확 판정 |

### Phase 2: OFC 3라인 배치 + Foul 판정

**목표**: 배치 전략 핵심 제약 시스템 완성

| # | 태스크 | 구현 방법 | Acceptance Criteria |
|---|--------|---------|-------------------|
| 2.1 | `OFCBoard` 모델 | `dataclass OFCBoard` — back: List[Card](5), mid: List[Card](5), front: List[Card](3) | 슬롯 크기 제약 검증, 카드 중복 배치 방지 |
| 2.2 | 폴(Foul) 판정 | `check_foul(board) -> FoulResult` — Back핸드 < Mid핸드 OR Mid핸드 < Front핸드 감지 | `test_board.py` — 정상/폴 케이스 20개 모두 정확 |
| 2.3 | 폴 패널티 적용 | 폴 라인 핸드 강도 -1등급으로 판정 | 폴 발생 시 해당 라인 핸드 자동 다운그레이드 확인 |
| 2.4 | 배치 실시간 폴 경고 | `get_foul_warning(board) -> List[str]` | 빈 슬롯/미완성 배치에서도 현재 폴 위험 경고 반환 |

### Phase 3: TFT 경제 시스템

**목표**: 골드 획득/소비/이자 완전 구현

| # | 태스크 | 구현 방법 | Acceptance Criteria |
|---|--------|---------|-------------------|
| 3.1 | 기본 골드 수입 | `round_income(gold: int, streak: int) -> int` — 기본 5 + 이자 + 연승/연패 | `test_economy.py` — 이자 표(0~50+골드) 전 구간 정확 |
| 3.2 | 상점 드로우 시스템 | 레벨별 등급 확률 표 기반 무작위 5장 드로우 | 레벨 1~9 확률 분포 검증, 풀 차감 확인 |
| 3.3 | 카드 구매/매각 | `buy_card(player, card)`, `sell_card(player, card)` — 등급별 비용/매각가 | 골드 부족 시 구매 거부, 매각 시 풀 반환 확인 |
| 3.4 | 별 강화 합성 | `merge_cards(player, card) -> StarCard` — 같은 랭크+수트 3장 → 2성 | 3장 소모 후 2성 생성, 풀 반환 없음 확인 |
| 3.5 | 레벨업 | `level_up(player)` — 4골드 소비, 배치 슬롯 +1, XP 누적 | XP 테이블 정확, 최대 레벨 9 제한 |

### Phase 4: 간소화 전투 시스템 (2인)

**목표**: 전투 판정 + HP 피해 + 훌라 선언 완성

| # | 태스크 | 구현 방법 | Acceptance Criteria |
|---|--------|---------|-------------------|
| 4.1 | 3라인 전투 판정 | `resolve_combat(board_a, board_b) -> CombatResult` — 라인별 비교 | Back/Mid/Front 각 판정 결과 정확, 스쿠프 감지 |
| 4.2 | HP 피해 계산 | `calc_damage(result, hula=False) -> int` — 이긴라인수×2 + 스쿠프+2 | 0:3, 1:2, 2:1, 3:0 시나리오 각각 정확 |
| 4.3 | 훌라 선언 | `declare_hula(player, board) -> bool` — 시너지 3개+ 조건 확인 | 조건 미충족 시 선언 불가, 성공 시 피해×4 확인 |
| 4.4 | 수트 시너지 카운트 | `count_synergies(board) -> int` — 같은 수트 2장+ 활성화 수 | 혼합 수트 배치 시너지 카운트 정확 |

### Phase 5: 기본 CLI UI

**목표**: 2인 로컬 대전 실제 플레이 가능 상태

| # | 태스크 | 구현 방법 | Acceptance Criteria |
|---|--------|---------|-------------------|
| 5.1 | 게임 상태 출력 | `print_game_state(game)` — 텍스트 보드, 골드, HP, 상점 표시 | 2인 상태 동시 표시, 카드 랭크/수트 명확히 구분 |
| 5.2 | 플레이어 입력 처리 | 구매/매각/배치/리롤/훌라선언 커맨드 입력 | 잘못된 입력 시 오류 메시지 + 재입력 요청 |
| 5.3 | 5라운드 게임 루프 | `run_poc_game()` — 완전한 5라운드 진행 | 처음부터 끝까지 에러 없이 완주, 최종 승자 출력 |

---

## 7. 영향 파일 및 디렉토리

### 7.1 신규 생성 파일

| 파일 경로 | 역할 | Phase |
|----------|------|-------|
| `C:\claude\card_ofc\src\__init__.py` | 패키지 초기화 | Phase 1 |
| `C:\claude\card_ofc\src\card.py` | Card, Rank, Suit, Deck, SharedPool | Phase 1 |
| `C:\claude\card_ofc\src\hand.py` | PokerHand 판정, 타이브레이커 | Phase 1 |
| `C:\claude\card_ofc\src\board.py` | OFCBoard, Foul 판정 | Phase 2 |
| `C:\claude\card_ofc\src\economy.py` | Gold, Shop, Level, Interest | Phase 3 |
| `C:\claude\card_ofc\src\combat.py` | CombatResolver, HP, Hula | Phase 4 |
| `C:\claude\card_ofc\src\pool.py` | SharedCardPool, 풀 차감/반환 | Phase 1 |
| `C:\claude\card_ofc\src\game.py` | GameState, RoundManager | Phase 4 |
| `C:\claude\card_ofc\cli\__init__.py` | CLI 패키지 초기화 | Phase 5 |
| `C:\claude\card_ofc\cli\main.py` | 2인 로컬 대전 진입점 | Phase 5 |
| `C:\claude\card_ofc\tests\__init__.py` | 테스트 패키지 초기화 | Phase 1 |
| `C:\claude\card_ofc\tests\test_card.py` | Card/Deck/Pool 테스트 | Phase 1 |
| `C:\claude\card_ofc\tests\test_hand.py` | 핸드 판정 100케이스 | Phase 1 |
| `C:\claude\card_ofc\tests\test_board.py` | OFC Foul 20케이스 | Phase 2 |
| `C:\claude\card_ofc\tests\test_economy.py` | 경제 시스템 테스트 | Phase 3 |
| `C:\claude\card_ofc\tests\test_combat.py` | 전투 + 훌라 테스트 | Phase 4 |
| `C:\claude\card_ofc\tests\test_game.py` | 통합 시뮬레이션 | Phase 5 |
| `C:\claude\card_ofc\pyproject.toml` | 패키지/린트 설정 | Phase 1 |

### 7.2 수정 예정 파일

| 파일 경로 | 수정 내용 |
|----------|---------|
| `C:\claude\card_ofc\CLAUDE.md` | 빌드/테스트 명령 갱신 (현재 "구현 후 갱신 필요" 상태) |

---

## 8. 산출물 및 완료 기준

### 8.1 POC 완료 기준 체크리스트

**핵심 로직 (Phase 1-4)**

- [ ] `test_hand.py` 100케이스 전체 통과 (오판정 0건)
- [ ] `test_board.py` Foul 판정 20케이스 전체 통과
- [ ] `test_economy.py` 이자 계산 전 구간 정확
- [ ] `test_combat.py` 훌라 선언 성공/실패 + HP 피해 정확
- [ ] 별 강화 합성 (3장→2성, 2성×3→3성) 정상 작동
- [ ] 공유 풀 차감/반환 메커니즘 정확

**플레이어빌리티 (Phase 5)**

- [ ] 2인 로컬 대전 5라운드 에러 없이 완주 가능
- [ ] 폴 경고 실시간 표시
- [ ] 훌라 선언 옵션 제공
- [ ] 최종 승자 + 라운드별 결과 출력

**품질 기준**

- [ ] ruff 린트 에러 0건
- [ ] 테스트 커버리지 ≥ 80% (핵심 로직)
- [ ] 모든 pytest 케이스 통과

### 8.2 플레이테스트 완료 기준

- [ ] 2인 테스트 5판 진행 완료
- [ ] "다시 하고 싶다" 응답 ≥ 60%
- [ ] "OFC 배치 규칙 이해했다" 응답 ≥ 80%
- [ ] "결과 판정이 납득된다" 응답 ≥ 90%

### 8.3 Full Dev 진입 조건

아래 모든 항목이 충족될 때 Full Development로 진행:

| 조건 | 기준 |
|------|------|
| 코어 로직 테스트 | 100% 통과 |
| 5라운드 완주 안정성 | 크래시 0건 / 5판 |
| 플레이어 흥미도 | "다시 하고 싶다" ≥ 60% |
| OFC 규칙 이해도 | ≥ 80% |
| 핵심 가설 H1~H5 | 최소 3개 이상 성공 기준 충족 |

---

## 9. 커밋 전략

### Conventional Commit 형식

```
<type>(<scope>): <description>

type:
  feat     - 새 기능
  fix      - 버그 수정
  test     - 테스트 추가/수정
  refactor - 리팩토링
  chore    - 설정/문서

scope:
  card, hand, board, economy, combat, pool, game, cli
```

### Phase별 커밋 계획

| Phase | 커밋 메시지 예시 |
|-------|--------------|
| Phase 1-a | `feat(card): 52장 카드 시스템 — Rank/Suit Enum + SharedPool` |
| Phase 1-b | `test(hand): 포커 핸드 판정 TDD — 100케이스 Red 단계` |
| Phase 1-c | `feat(hand): 포커 핸드 판정 엔진 — 9종 핸드 + 타이브레이커` |
| Phase 2-a | `test(board): OFC Foul 판정 TDD — 20케이스 Red 단계` |
| Phase 2-b | `feat(board): OFC 3라인 배치 + Foul 판정 구현` |
| Phase 3 | `feat(economy): TFT 경제 시스템 — 골드/이자/상점/레벨` |
| Phase 4 | `feat(combat): 전투 판정 + HP 피해 + 훌라 선언 시스템` |
| Phase 5 | `feat(cli): 2인 로컬 대전 CLI — 5라운드 완주 가능` |
| 완료 | `chore(docs): CLAUDE.md 빌드/테스트 명령 갱신` |
